# Roost Configuration — copy to .env and fill in values.
# P19.1.002: Docker Compose configuration reference
#
# Required values are marked [REQUIRED].
# Optional values have sensible defaults.

# ── Operating Mode ────────────────────────────────────────────────────────────
# ROOST_MODE=private — self-hosted personal media server (default)
# ROOST_MODE=public  — managed/commercial deployment (requires Stripe)
ROOST_MODE=private

# The public-facing base URL for this Roost instance.
ROOST_BASE_URL=https://roost.example.com

# ── Database [REQUIRED] ───────────────────────────────────────────────────────
POSTGRES_USER=roost
POSTGRES_PASSWORD=change_this_password     # [REQUIRED]
POSTGRES_DB=roost

# ── Redis [REQUIRED] ──────────────────────────────────────────────────────────
REDIS_PASSWORD=change_this_redis_password  # [REQUIRED]

# ── Auth [REQUIRED] ───────────────────────────────────────────────────────────
# Must be at least 32 characters. Generate: openssl rand -hex 32
AUTH_JWT_SECRET=                           # [REQUIRED]

# ── Billing (public mode only) ────────────────────────────────────────────────
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_PUBLISHABLE_KEY=

# ── CDN / HLS Signing (public mode only) ─────────────────────────────────────
# Must be at least 32 characters. Generate: openssl rand -hex 32
CDN_HMAC_SECRET=
CDN_RELAY_URL=
STREAM_BASE_URL=https://stream.example.com

# ── Email ─────────────────────────────────────────────────────────────────────
ELASTIC_EMAIL_API_KEY=
EMAIL_SENDER=noreply@example.com
EMAIL_UNSUBSCRIBE_SECRET=                  # Generate: openssl rand -hex 32

# ── Flock Integration (optional) ──────────────────────────────────────────────
FLOCK_OAUTH_BASE_URL=https://yourflock.org
FLOCK_CLIENT_ID=roost
FLOCK_CLIENT_SECRET=
FLOCK_REDIRECT_URI=https://roost.example.com/auth/flock/callback
FLOCK_SERVICE_TOKEN=

# ── Cloudflare (optional) ─────────────────────────────────────────────────────
CLOUDFLARE_API_KEY=
CLOUDFLARE_ZONE_ID=

# ── Backup ────────────────────────────────────────────────────────────────────
# Cloudflare R2 (S3-compatible)
R2_BUCKET=roost-backups
R2_ENDPOINT=https://<account_id>.r2.cloudflarestorage.com
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
BACKUP_RETENTION_DAYS=30

# ── Logging ───────────────────────────────────────────────────────────────────
ROOST_LOG_LEVEL=info       # debug, info, warn, error
ROOST_LOG_FORMAT=json      # json (production), pretty (development)

# ── Nginx / TLS ───────────────────────────────────────────────────────────────
SSL_CERT_PATH=./ssl        # Path to TLS certificates directory

# ── Media ─────────────────────────────────────────────────────────────────────
MEDIA_PATH=./media         # Local media library (read-only mount)
