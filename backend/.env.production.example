# .env.production.example — Roost Production Environment
# Copy to .env on the production server and fill in all CHANGEME values.
# NEVER commit a .env file with real credentials.
# All secrets stored in your local secrets manager on dev machines.

# ─────────────────────────────────────────────
# Project
# ─────────────────────────────────────────────
PROJECT_NAME=roost
BASE_DOMAIN=roost.yourflock.org
ENV=production

# ─────────────────────────────────────────────
# PostgreSQL
# Note: Roost uses port 5433 locally to avoid conflict with Flock (5432)
# ─────────────────────────────────────────────
POSTGRES_USER=roost
POSTGRES_PASSWORD=CHANGEME-strong-random-password
POSTGRES_DB=roost
POSTGRES_PORT=5433

# ─────────────────────────────────────────────
# Hasura GraphQL Engine
# ─────────────────────────────────────────────
HASURA_PORT=8081
HASURA_GRAPHQL_ADMIN_SECRET=CHANGEME-strong-admin-secret
# 32+ character random key — generate with: openssl rand -hex 32
HASURA_JWT_KEY=CHANGEME-32-char-jwt-signing-key-here

# ─────────────────────────────────────────────
# Auth Service
# ─────────────────────────────────────────────
AUTH_SMTP_HOST=smtp.elasticemail.com
AUTH_SMTP_PORT=587
AUTH_SMTP_USER=CHANGEME-elastic-smtp-user
AUTH_SMTP_PASS=CHANGEME-elastic-smtp-password

# ─────────────────────────────────────────────
# Cloudflare Tunnel
# Get from: cloudflare Zero Trust > Tunnels > your tunnel > token
# ─────────────────────────────────────────────
CLOUDFLARE_TUNNEL_TOKEN=CHANGEME-cloudflare-tunnel-token

# ─────────────────────────────────────────────
# Cloudflare Worker (shared secret for relay auth)
# Must match CF_WORKER_SECRET in wrangler.toml secrets
# Generate with: openssl rand -hex 32
# ─────────────────────────────────────────────
CF_WORKER_SECRET=CHANGEME-32-char-worker-secret

# ─────────────────────────────────────────────
# Stripe (billing)
# Live keys from Stripe dashboard: https://dashboard.stripe.com/apikeys
# ─────────────────────────────────────────────
STRIPE_SECRET_KEY=sk_live_CHANGEME
STRIPE_WEBHOOK_SECRET=whsec_CHANGEME

# Stripe Price IDs — create in Stripe dashboard for each plan
STRIPE_BASIC_MONTHLY_PRICE=price_CHANGEME
STRIPE_BASIC_ANNUAL_PRICE=price_CHANGEME
STRIPE_PREMIUM_MONTHLY_PRICE=price_CHANGEME
STRIPE_PREMIUM_ANNUAL_PRICE=price_CHANGEME
STRIPE_FAMILY_MONTHLY_PRICE=price_CHANGEME
STRIPE_FAMILY_ANNUAL_PRICE=price_CHANGEME

# ─────────────────────────────────────────────
# Cloudflare R2 Object Storage
# Bucket names created in Cloudflare dashboard
# Access keys: Cloudflare > R2 > Manage R2 API tokens
# ─────────────────────────────────────────────
R2_BUCKET=roost-streams
R2_ACCESS_KEY=CHANGEME-r2-access-key-id
R2_SECRET_KEY=CHANGEME-r2-secret-access-key
# Format: https://{account_id}.r2.cloudflarestorage.com
R2_ENDPOINT=https://ACCOUNT_ID.r2.cloudflarestorage.com

# ─────────────────────────────────────────────
# Encryption (AES-256 for sensitive DB fields)
# Generate with: openssl rand -hex 32 (must be exactly 64 hex chars = 32 bytes)
# ─────────────────────────────────────────────
ENCRYPTION_KEY=CHANGEME-64-hex-char-aes256-key

# ─────────────────────────────────────────────
# Stream ingest
# ─────────────────────────────────────────────
SEGMENT_DIR=/data/segments
# Target segment duration in seconds
SEGMENT_DURATION=6
# Max concurrent FFmpeg pipelines (CX23 has 2 vCPU — keep conservative)
MAX_CONCURRENT_STREAMS=10

# ─────────────────────────────────────────────
# Founding Family
# ─────────────────────────────────────────────
FOUNDING_FAMILY_SLOTS=500

# ─────────────────────────────────────────────
# Docker image tag (set by CI/CD on deploy)
# ─────────────────────────────────────────────
IMAGE_TAG=latest
